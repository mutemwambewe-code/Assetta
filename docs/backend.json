{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user of the Assetta platform, including subscription and role information.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "Unique identifier for the user, matching Firebase Auth UID."
        },
        "name": {
          "type": "string",
          "description": "The full name of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the user."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the system.",
          "enum": ["USER", "ADMIN"]
        },
        "trial_start_date": {
          "type": "string",
          "format": "date-time",
          "description": "The start date of the user's free trial."
        },
        "trial_end_date": {
          "type": "string",
          "format": "date-time",
          "description": "The end date of the user's free trial."
        },
        "subscription_status": {
          "type": "string",
          "enum": ["TRIAL", "ACTIVE", "INACTIVE", "CANCELED", "PAST_DUE", null],
          "description": "The current status of the user's subscription."
        },
        "plan": {
          "type": "string",
          "enum": ["monthly", "yearly", null],
          "description": "The user's active subscription plan."
        },
        "current_period_end": {
          "type": "string",
          "format": "date-time",
          "description": "The date when the current subscription period ends."
        }
      },
      "required": ["uid", "role"]
    },
    "Property": {
      "title": "Property",
      "description": "A property with units.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "location": { "type": "string" },
        "units": { "type": "number" },
        "type": { "type": "string" }
      },
      "required": ["name", "location", "units", "type"]
    },
    "Tenant": {
      "title": "Tenant",
      "description": "A tenant in a property.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "avatarUrl": { "type": "string" },
        "property": { "type": "string" },
        "unit": { "type": "string" },
        "phone": { "type": "string" },
        "email": { "type": "string" },
        "rentStatus": { "type": "string" },
        "rentAmount": { "type": "number" },
        "leaseStartDate": { "type": "string" },
        "leaseEndDate": { "type": "string" }
      },
      "required": ["name", "property", "unit", "phone", "email", "rentAmount", "leaseStartDate", "leaseEndDate"]
    },
    "MessageLog": {
        "title": "MessageLog",
        "description": "A log of a message.",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "providerId": { "type": "string" },
            "tenantId": { "type": "string" },
            "tenantName": { "type": "string" },
            "message": { "type": "string" },
            "date": { "type": "string" },
            "method": { "type": "string" },
            "direction": { "type": "string" },
            "status": { "type": "string" }
        },
        "required": ["id", "tenantId", "tenantName", "message", "date", "method"]
    },
    "Template": {
        "title": "Template",
        "description": "A message template.",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "title": { "type": "string" },
            "content": { "type": "string" },
            "category": { "type": "string" }
        },
        "required": ["id", "title", "content", "category"]
    },
    "Invoice": {
        "title": "Invoice",
        "description": "An invoice for a tenant.",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "tenantId": { "type": "string" },
            "propertyId": { "type": "string" },
            "issueDate": { "type": "string", "format": "date" },
            "dueDate": { "type": "string", "format": "date" },
            "items": { 
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "description": { "type": "string" },
                        "amount": { "type": "number" }
                    },
                    "required": ["description", "amount"]
                }
            },
            "totalAmount": { "type": "number" },
            "status": { "type": "string", "enum": ["draft", "sent", "paid", "overdue"] },
            "notes": { "type": "string" }
        },
        "required": ["id", "tenantId", "issueDate", "dueDate", "items", "totalAmount", "status"]
    },
    "UtilityBill": {
      "title": "Utility Bill",
      "description": "A record of a utility bill for a property.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "propertyId": { "type": "string" },
        "propertyName": { "type": "string" },
        "utilityType": { "type": "string", "enum": ["Water", "Electricity", "Garbage", "Security", "Internet", "Other"] },
        "billingPeriodStart": { "type": "string", "format": "date" },
        "billingPeriodEnd": { "type": "string", "format": "date" },
        "amount": { "type": "number" },
        "dueDate": { "type": "string", "format": "date" },
        "status": { "type": "string", "enum": ["Paid", "Pending", "Overdue"] },
        "billUrl": { "type": "string" }
      },
      "required": ["propertyId", "propertyName", "utilityType", "billingPeriodStart", "billingPeriodEnd", "amount", "dueDate", "status"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores user profile and subscription data."
    },
    "/users/{userId}/properties/{propertyId}": {
      "schema": { "$ref": "#/entities/Property" },
      "description": "Stores properties owned by a user."
    },
    "/users/{userId}/tenants/{tenantId}": {
      "schema": { "$ref": "#/entities/Tenant" },
      "description": "Stores tenants for a user."
    },
    "/users/{userId}/messagelogs/{messagelogId}": {
        "schema": { "$ref": "#/entities/MessageLog" },
        "description": "Stores message logs for a user."
    },
    "/users/{userId}/templates/{templateId}": {
        "schema": { "$ref": "#/entities/Template" },
        "description": "Stores message templates for a user."
    },
    "/users/{userId}/invoices/{invoiceId}": {
        "schema": { "$ref": "#/entities/Invoice" },
        "description": "Stores invoices for a user."
    },
    "/users/{userId}/utilitybills/{utilityBillId}": {
      "schema": { "$ref": "#/entities/UtilityBill" },
      "description": "Stores utility bills for a user's properties."
    }
  }
}
